<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>第3課-単語1</title>
<style type="text/css">
.main {
	font-family: SimSun;
}
.japanese {
	font-family: ＭＳ 明朝;
}
.chinese {
	font-family: SimSun;
}
body,td,th {
	font-size: 24px;
}
a:link {
	color: #03F;
}
a:visited {
	color: #03F;
}
</style>
<script>

</script>
</head>
<body>

<!--背景の色 -->
<style>
body{background-color:lightblue; font-family:sans-serif;}
</style>
<div>
<h1 align="center">
第3課　我家有四口人　
<h1>
</div>
<div>
<table id="title" align="center">
  <tr>
      <td>
          <lable>表示選択</lable>
      </td>
      <td class="selecter">
		  <select name="select" onchange="setViewItem(this.value)" id="language_1">
		    <option value="chinese" selected>中国語 </option>
		    <option value="japanese">中国語+日本語 </option>
		    <option value="pinyin">中国語+ピンイン </option>
		    <option value="everything" >全部 </option>
		  </select>
     </td>
<td>
          <input type="button" value="全文朗読" onclick="playAllRadioList(3)"/>
      </td>
<td>
          <input type="button" value="終了" onclick="myrefresh()"/>
      </td>
  <!--     <td> <a href="1k-t2-1.html">補充単語</a></td>-->
            
      
      <td>
          <a href="../../3k.html">戻る</a> 
      </td>
  </tr>
</table>
</div>
<div>
<table align="center">


  <tr id="ch_1">
    <td id="td_ch">
      <lable id="d1-3k-t-1_ch" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　家　</font></lable>	
        <br>
        <lable id="d1-3k-t-2_ch" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　有　</font></lable>	
        <br>
        <lable id="d1-3k-t-3_ch" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　口　</font></lable>	
        <br>
        <lable id="d1-3k-t-4_ch" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　人　</font></lable>	
        <br>
        <lable id="d1-3k-t-5_ch" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　没有　</font></lable>	
        <br>
        <lable id="d1-3k-t-6_ch" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　哥哥 　</font></lable>	
        <br>
        <lable id="d1-3k-t-7_ch" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　姐姐　</font></lable>	
        <br>
        <lable id="d1-3k-t-8_ch" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　忙　</font></lable>	
        <br>
        <lable id="d1-3k-t-9_ch" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　在　</font></lable>	
        <br>
   
  
      </td>
      <td id="td_py" style="display:none" >
        <lable id="d1-3k-t-1_py" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　jiā　</font></lable>	
        <br>
        <lable id="d1-3k-t-2_py" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　yǒu　</font></lable>	
        <br>
        <lable id="d1-3k-t-3_py" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　kǒu　</font></lable>	
        <br>
        <lable id="d1-3k-t-4_py" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　rén　</font></lable>	
        <br>
        <lable id="d1-3k-t-5_py" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　méiyǒu　</font></lable>	
        <br>
        <lable id="d1-3k-t-6_py" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　gēge　</font></lable>	
        <br>
        <lable id="d1-3k-t-7_py" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　jiějie　</font></lable>	
        <br>
        <lable id="d1-3k-t-8_py" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　máng　</font></lable>	
        <br>
        <lable id="d1-3k-t-9_py" class="chinese" onclick="fileStart(this.id)"><font face="simsun">　zài　</font></lable>	
        <br>
 
        
      </td>
      <td id="td_jp" style="display:none" >
        <lable id="d1-3k-t-1_jp" class="chinese" onclick="fileStart(this.id)"><font face="mincho"> 家 </font></lable>	
        <br>
        <lable id="d1-3k-t-2_jp" class="chinese" onclick="fileStart(this.id)"><font face="mincho"> ～がある；～がいる </font></lable>	
        <br>
        <lable id="d1-3k-t-3_jp" class="chinese" onclick="fileStart(this.id)"><font face="mincho"> 家族の人数を数える単位 </font></lable>	
        <br>
        <lable id="d1-3k-t-4_jp" class="chinese" onclick="fileStart(this.id)"><font face="mincho"> 人 </font></lable>	
        <br>
        <lable id="d1-3k-t-5_jp" class="chinese" onclick="fileStart(this.id)"><font face="mincho"> ない；いない </font></lable>	
        <br>
        <lable id="d1-3k-t-6_jp" class="chinese" onclick="fileStart(this.id)"><font face="mincho"> 兄；お兄さん </font></lable>	
        <br>
        <lable id="d1-3k-t-7_jp" class="chinese" onclick="fileStart(this.id)"><font face="mincho"> 姉；お姉さん  </font></lable>	
        <br>
        <lable id="d1-3k-t-8_jp" class="chinese" onclick="fileStart(this.id)"><font face="mincho"> 忙しい </font></lable>	
        <br>
        <lable id="d1-3k-t-9_jp" class="chinese" onclick="fileStart(this.id)"><font face="mincho"> ～にある；～にいる </font></lable>	
        <br>
        
      </td>
      <tr height="20"></tr>
      <tr>
       <td>
       <a href="3k-t1-2.html">次へ</a>
       </td>
      </tr>
   </tr>
</table>
</div>
<!-- AUDIO CREATE START -->
<audio id="audiolocal" ></audio>
<!-- AUDIO CREATE END -->

<script>

// メディアプレイヤー
var oAudio  = document.getElementById('audiolocal');
// var audio = document.createElement("audio");

// 前回文字ID
var idper = "";

// 言語表示
// lang:dropdownlistの選択値
function setViewItem(lang) {
    //TRのID
    var p_strIdCh = document.getElementById("td_ch");
    var p_strIdJp = document.getElementById("td_jp");
    var p_strIdPy = document.getElementById("td_py");
    if (lang == "chinese") {
        // 引数=chineseの時
        // TRを活性に設定
        p_strIdCh.style.display = '';
        // TRを非活性に設定
        p_strIdJp.style.display = 'none';
        // TRを非活性に設定
        p_strIdPy.style.display = 'none';
    } else if (lang == "japanese") {
        // 引数=japaneseの時
        // TRを非活性に設定
        p_strIdCh.style.display = '';
        // TRを活性に設定
        p_strIdJp.style.display = '';
        // TRを非活性に設定
        p_strIdPy.style.display = 'none';
    } else if (lang == "pinyin") {
        // 引数=pinyinの時
        // TRを非活性に設定
        p_strIdCh.style.display = '';
        // TRを非活性に設定
        p_strIdJp.style.display = 'none';
        // TRを活性に設定
        p_strIdPy.style.display = '';
        }else if (lang == "everything") {
        // 引数=pinyinの時
        // TRを非活性に設定
        p_strIdCh.style.display = '';
        // TRを非活性に設定
        p_strIdJp.style.display = '';
        // TRを活性に設定
        p_strIdPy.style.display = '';
}};


// 全部再生
function playAllRadioList(raditCnt) {
	// radioファイル配列
    var radioArgs = new Array('d1-3k-t-1', 'd1-3k-t-2', 'd1-3k-t-3', 'd1-3k-t-4', 'd1-3k-t-5', 'd1-3k-t-6', 'd1-3k-t-7', 'd1-3k-t-8', 'd1-3k-t-9');
   
    // ファイル再生を呼出
    // 0は固定値
	doRadioFile(radioArgs, 0);
};

// ファイル再生
function doRadioFile(radioArgs, index) {
  
  // 前回文字の色を戻り
    addColorToStr(idper, 'black');

    
    // ファイル終了判断
    if (index >= radioArgs.length) {
        // 再生終了
        return;
    }
	// '.mp3'
	var lastStr = '.mp3';
    // 本ファイル名
	var filename = radioArgs[index].concat(lastStr);
	

	// フォルダ
	var folderPath = 'sound/';
	// フルパス
	var filePath = folderPath.concat(filename);
	
	// NEW 新プレヤー
	// oAudio = new Audio(filePath)

	oAudio.src = filePath;
    // ファイル再生処理
	oAudio.play();

    // 前回文字IDを設定
	idper = radioArgs[index];

    // 文字色を設定
    addColorToStr(radioArgs[index], 'red');


	oAudio.addEventListener("ended", function(){
        // 文字色を削除
        addColorToStr(radioArgs[index], 'black');
        index = index+1;
        doRadioFile(radioArgs, index);
	});

};

// アンダーバーを追加
function addColorToStr(strId, colorStr) {
    var strCh = "_ch";
    var strIdCh = strId.concat(strCh);
    
    var p_strIdCh = document.getElementById(strIdCh);
    if (p_strIdCh == undefined) {
        return;
    }
    
    // css追加
    p_strIdCh.style.color = colorStr;
   
};

    // 指定されたファイルを再生
    function fileStart(id) {

    // 前回文字の色を戻り
    addColorToStr(idper, 'black');

    // ファイル名称を取得
    var strs = id.split("_");
    if (strs.length > 0) {
		// '.mp3'
		var lastStr = '.mp3';
	    // 本ファイル名
		var filename = strs[0].concat(lastStr);
		// var oAudio  = document.createElement("oAudio ");
		// フォルダ
		var folderPath = 'sound/';
		// フルパス
		var filePath = folderPath.concat(filename);
		oAudio .src = filePath;
	    // ファイル再生処理
		oAudio .play();

	// 前回文字IDを設定
		idper = strs[0];
	    // 文字色を設定
	    addColorToStr(strs[0], 'red');
		oAudio .addEventListener("ended", function(){
	    　　// 文字色を削除
	        addColorToStr(strs[0], 'black');
	        
	        { 
    // 前回radio停止
    oAudio.pause();
    // 前回文字の色を戻り
    addColorToStr(idper, 'black');
} 
		});
    }
}

// radioを終了
function myrefresh() 
{ 
    // 前回radio停止
    oAudio .pause();
    // 前回文字の色を戻り
    addColorToStr(idper, 'black');
} 

</script>
</body>
</html>
